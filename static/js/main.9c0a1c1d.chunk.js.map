{"version":3,"sources":["image/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Login.js","components/Register.js","components/Footer.js","contexts/LoadingContext.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/ImagePopup.js","utils/api.js","components/AddPlacePopup.js","components/SubmitDeletePopup.js","components/ProtectedRoute.js","components/PageNotFound.js","utils/auth.js","components/InfoToolTip.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","handleSignOut","loggedIn","email","history","useHistory","location","useLocation","pathname","width","window","console","log","getWindowDimension","className","to","src","logo","alt","onClick","push","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","i","cardDeleteButtonClassName","cardLikeButton","link","name","type","length","Main","cards","onEditAvatar","onEditProfile","onAddPlace","cardList","map","cardItem","avatar","about","noValidate","withRouter","signIn","useState","setEmail","password","setPassword","onSubmit","e","preventDefault","placeholder","onChange","target","value","onRegister","Footer","LoadingContext","PopupWithForm","isOpen","onClose","stopClose","title","children","isValid","loadingText","onMouseDown","disabled","EditProfilePopup","onUpdateUser","setName","description","setDescription","inputName","setInputNameValid","inputAbout","setInputAboutValid","nameErrorMessage","setNameErrorMessage","aboutErrorMessage","setAboutErrorMessage","useEffect","id","required","minLength","maxLength","validity","valid","validationMessage","EditAvatarPopup","onUpdateAvatar","useRef","avatarInputValid","setAvatarInputValid","errorMessage","setErrorMessage","current","parentElement","reset","ref","onInput","ImagePopup","api","options","this","_baseUrl","baseUrl","_headers","headers","params","fetch","then","res","ok","json","Promise","reject","status","_sendRequest","data","method","body","JSON","stringify","cardId","all","getUserInfo","getCards","authorization","AddPlacePopup","nameInputValid","setNameInputValid","linkInputValid","setLinkInputValid","linkErrorMessage","setLinkErrorMessage","SubmitDeletePopup","onDelete","ProtectedRoute","Component","component","props","PageNotFound","BASE_URL","InfoToolTip","success","App","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isDeletePopupOpen","setIsDeletePopupOpen","isInfoPopupOpen","setIsInfoPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","cardToDelete","setCardToDelete","setLoadingText","setLoggedIn","setSuccess","handleEscButton","key","closeAllPopups","stopEvent","stopPropagation","document","removeEventListener","localStorage","getItem","token","auth","handleTokenCheck","getAppData","userProfile","catch","err","Provider","removeItem","exact","path","changeLikeStatus","newCard","newCards","c","addEventListener","response","setItem","user","setAvatar","userInfo","setUserInfo","addNewCard","deleteCard","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9c0a1c1d.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.8e568801.svg\";","import React from 'react';\r\nimport logo from '../image/logo.svg';\r\nimport {useHistory, useLocation, Link} from 'react-router-dom';\r\n\r\nfunction Header({handleSignOut, loggedIn, email}) {\r\n  const history = useHistory();\r\n  const location = useLocation().pathname;\r\n\r\n  function signOut() {\r\n    handleSignOut();\r\n    history.push('/')\r\n  }\r\n\r\n  function getWindowDimension () {\r\n    const width = window;\r\n    console.log(width)\r\n  }\r\n\r\n  getWindowDimension ()\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <Link to=\"/\">\r\n        <img src={logo} className=\"header__logo\" alt=\"Место.Россия\"/>\r\n      </Link>\r\n      <div className=\"header__mobile\">\r\n        <p className=\"header__text\">{email}</p>\r\n        {loggedIn && <Link to='/sign-in' className='header__text' onClick={signOut}>Выйти</Link>}\r\n      </div>\r\n\r\n      {location === '/sign-in' && <Link to='/sign-up' className='header__text'>Регистрация</Link>}\r\n      {location === '/sign-up' && <Link to='/sign-in' className='header__text'>Войти</Link>}\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext({});\r\n","import React from 'react';\r\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\r\n\r\nfunction Card({\r\n                card,\r\n                onCardClick,\r\n                onCardLike,\r\n                onCardDelete\r\n              }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n  const cardDeleteButtonClassName = (`element__delete-btn ${isOwn ? '' : 'element__delete-btn_hidden'}`);\r\n  const cardLikeButton = (`element__like-btn ${isLiked ? 'element__like-btn_active' : ''}`);\r\n\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(card._id);\r\n  }\r\n\r\n  return (\r\n    <article className=\"element\">\r\n      <img className=\"element__img\" src={card.link} alt={card.name} onClick={handleClick}/>\r\n      <button type=\"button\" className={cardDeleteButtonClassName} onClick={handleDeleteClick}></button>\r\n      <h2 className=\"element__title\">{card.name}</h2>\r\n      <div className=\"element__like-group\">\r\n        <button type=\"button\" className={cardLikeButton} onClick={handleLikeClick}></button>\r\n        <p className=\"element__like-count\">{card.likes.length}</p>\r\n      </div>\r\n    </article>\r\n  )\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\nimport Card from \"./Card\";\r\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\r\n\r\nfunction Main({\r\n                cards,\r\n                onCardLike,\r\n                onCardDelete,\r\n                onEditAvatar,\r\n                onEditProfile,\r\n                onAddPlace,\r\n                onCardClick\r\n              }) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const cardList = cards.map((cardItem) => (\r\n      <Card\r\n        card={cardItem}\r\n        onCardClick={onCardClick}\r\n        onCardLike={onCardLike}\r\n        onCardDelete={onCardDelete}\r\n        key={cardItem._id}\r\n      />\r\n    )\r\n  );\r\n\r\n  return (\r\n    <main className=\"content\">\r\n\r\n      <section className=\"profile\">\r\n        <div onClick={onEditAvatar}>\r\n          <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Аватар\"/>\r\n          <div className=\"profile__edit-avatar\"></div>\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <div>\r\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n            <p className=\"profile__about\">{currentUser.about}</p>\r\n          </div>\r\n          <button type=\"button\" className=\"profile__edit-btn\" onClick={onEditProfile}></button>\r\n        </div>\r\n        <button type=\"button\" className=\"profile__add-btn\" onClick={onAddPlace}></button>\r\n      </section>\r\n\r\n      <section className=\"photo\">\r\n        {cardList}\r\n      </section>\r\n\r\n      <section className=\"popup popup_type_confirm\">\r\n        <form className=\"form popup__form_type_confirm\" name=\"confirm-form\" noValidate>\r\n          <button type=\"button\" className=\"popup__close-btn popup__close-btn_form_confirm\"></button>\r\n          <h3 className=\"form__title\">Вы уверены?</h3>\r\n          <button type=\"submit\" className=\"form__submit-btn popup__submit-btn_form_add\">Да</button>\r\n        </form>\r\n      </section>\r\n\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Main;","import React from 'react';\r\nimport {withRouter} from 'react-router-dom';\r\n\r\nconst Login = ({signIn}) => {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    signIn(password, email);\r\n    setEmail('');\r\n    setPassword('');\r\n  }\r\n\r\n  return (\r\n    <div className=\"sign\">\r\n      <h1 className=\"sign__title\">Авторизация</h1>\r\n      <form className=\"sign__form\" onSubmit={handleSubmit}>\r\n        <input name=\"email\" placeholder=\"Email\" className=\"sign__input\" type='email'\r\n               onChange={(e) => setEmail(e.target.value)}/>\r\n        <input name=\"password\" placeholder=\"Пароль\" className=\"sign__input\" type='password'\r\n               onChange={(e) => setPassword(e.target.value)}/>\r\n        <button type='submit' className=\"sign__submit\">Войти</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(Login);\r\n","import React from 'react';\r\nimport {withRouter, Link} from 'react-router-dom';\r\n\r\nconst Register = ({onRegister}) => {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onRegister(password, email);\r\n    setEmail('');\r\n    setPassword('');\r\n  }\r\n\r\n  return (\r\n    <div className=\"sign\">\r\n      <h1 className=\"sign__title\">Регистрация</h1>\r\n      <form onSubmit={handleSubmit} className=\"sign__form\" noValidate>\r\n        <input className=\"sign__input\" name=\"email\" onChange={(e) => setEmail(e.target.value)} placeholder=\"Email\"\r\n               type='email' value={email || ''}/>\r\n        <input className=\"sign__input\" name=\"password\" onChange={(e) => setPassword(e.target.value)}\r\n               placeholder=\"Пароль\"\r\n               type='password' value={password || ''}/>\r\n        <button type='submit' className=\"sign__submit\">Зарегистрироваться</button>\r\n      </form>\r\n      <Link to=\"/sign-in\" className='sign__link'>Уже зарегистрированы? Войти</Link>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(Register);","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy;2021 Mesto Russia</p>\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default Footer;","import {createContext} from 'react';\r\n\r\nexport const LoadingContext = createContext();\r\n","import React from 'react';\r\nimport {LoadingContext} from \"../contexts/LoadingContext\";\r\n\r\nfunction PopupWithForm({\r\n                         isOpen,\r\n                         onClose,\r\n                         stopClose,\r\n                         onSubmit,\r\n                         name,\r\n                         title,\r\n                         children,\r\n                         isValid\r\n                       }) {\r\n  const loadingText = React.useContext(LoadingContext);\r\n\r\n  return (\r\n    <section className={`popup popup_type_${name}${isOpen ? ' popup_visible' : ''}`} onMouseDown={onClose}>\r\n      <form className='popup__form' name={name} onSubmit={onSubmit} noValidate onMouseDown={stopClose}>\r\n        <button type=\"button\" className=\"popup__close-btn\" onMouseDown={onClose}></button>\r\n        <h3 className=\"popup__title\">{title}</h3>\r\n        {children}\r\n        <button type=\"submit\" disabled={!isValid} className=\"popup__submit-btn\">{loadingText}</button>\r\n      </form>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default PopupWithForm;","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\n\r\nfunction EditProfilePopup({isOpen, onClose, stopClose, onUpdateUser}) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [name, setName] = React.useState(currentUser.name);\r\n  const [description, setDescription] = React.useState(currentUser.description);\r\n  const [inputName, setInputNameValid] = React.useState(false);\r\n  const [inputAbout, setInputAboutValid] = React.useState(false);\r\n  const [nameErrorMessage, setNameErrorMessage] = React.useState('');\r\n  const [aboutErrorMessage, setAboutErrorMessage] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n    setNameErrorMessage('');\r\n    setAboutErrorMessage('');\r\n    setInputNameValid(false);\r\n    setInputAboutValid(false);\r\n  }, [currentUser, isOpen]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      stopClose={stopClose}\r\n      onSubmit={handleSubmit}\r\n      name={'edit-profile'}\r\n      title={'Редактировать профиль'}\r\n      isValid={inputName && inputAbout}\r\n    >\r\n      <>\r\n        <input name=\"name\" id=\"edit-name\" className=\"popup__input\" placeholder=\"Имя\" required\r\n               minLength=\"2\" maxLength=\"40\" value={name || \"\"}\r\n               onChange={e => {\r\n                 setName(e.target.value);\r\n                 setInputNameValid(e.target.validity.valid);\r\n                 setNameErrorMessage(e.target.validationMessage);\r\n               }}\r\n        />\r\n        <span id=\"edit-name-error\" className=\"popup__error\">{nameErrorMessage}</span>\r\n        <input name=\"about\" id=\"edit-about\" className=\"popup__input\" placeholder=\"О себе\"\r\n               required minLength=\"2\" maxLength=\"200\" value={description || \"\"}\r\n               onChange={e => {\r\n                 setDescription(e.target.value);\r\n                 setInputAboutValid(e.target.validity.valid);\r\n                 setAboutErrorMessage(e.target.validationMessage);\r\n               }\r\n               }\r\n        />\r\n        <span id=\"edit-about-error\" className=\"popup__error\">{aboutErrorMessage}</span>\r\n      </>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditAvatarPopup({isOpen, onClose, stopClose, onUpdateAvatar}) {\r\n  const avatar = React.useRef('');\r\n  const [avatarInputValid, setAvatarInputValid] = React.useState(false);\r\n  const [errorMessage, setErrorMessage] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    !isOpen && avatar.current.parentElement.reset();\r\n    setAvatarInputValid(false);\r\n    setErrorMessage('');\r\n  }, [isOpen])\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    onUpdateAvatar({\r\n      avatar: avatar.current.value\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      stopClose={stopClose}\r\n      onSubmit={handleSubmit}\r\n      name={'edit-avatar'}\r\n      title={'Обновить аватар'}\r\n      isValid={avatarInputValid}\r\n    >\r\n      <>\r\n        <input name=\"avatar\" id=\"edit-avatar\" type=\"url\" ref={avatar} className=\"popup__input\"\r\n               required onInput={() => {\r\n          setAvatarInputValid(avatar.current.validity.valid);\r\n          setErrorMessage(avatar.current.validationMessage);\r\n        }}/>\r\n        <span id=\"edit-avatar-error\" className=\"popup__error\">{errorMessage}</span>\r\n      </>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\n\r\nfunction ImagePopup({card, onClose, stopClose}) {\r\n  return (\r\n    <section className={`popup popup_type_card-view ${card.link && ' popup_visible'}`} onClick={onClose}>\r\n      <div className=\"popup__card-view\" onClick={stopClose}>\r\n        <button type=\"button\" className=\"popup__close-btn popup__close-btn_form_view\"\r\n                onClick={onClose}></button>\r\n        <img className=\"popup__image\" src={card.link} alt={card.name}/>\r\n        <h3 className=\"popup__card-title\">{card.name}</h3>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default ImagePopup;","class Api {\r\n  constructor(options) {\r\n    this._baseUrl = options.baseUrl;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  _sendRequest(link, params) {\r\n    return fetch(link, params)\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`)\r\n      });\r\n  }\r\n\r\n  getUserInfo() {\r\n    return this._sendRequest(`${this._baseUrl}users/me`, {\r\n      headers: this._headers\r\n    });\r\n  }\r\n\r\n  getCards() {\r\n    return this._sendRequest(`${this._baseUrl}cards`, {\r\n      headers: this._headers\r\n    })\r\n  }\r\n\r\n  setUserInfo(data) {\r\n    return this._sendRequest(`${this._baseUrl}users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        about: data.about\r\n      })\r\n    })\r\n  }\r\n\r\n  addNewCard(data) {\r\n    return this._sendRequest(`${this._baseUrl}cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        link: data.link,\r\n        name: data.name\r\n      })\r\n    })\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return this._sendRequest(`${this._baseUrl}cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers\r\n    })\r\n  }\r\n\r\n  changeLikeStatus(cardId, isLiked) {\r\n    return this._sendRequest(`${this._baseUrl}cards/likes/${cardId}`, {\r\n      method: (`${isLiked ? 'PUT' : 'DELETE'}`),\r\n      headers: this._headers\r\n    })\r\n  }\r\n\r\n  setAvatar(link) {\r\n    return this._sendRequest(`${this._baseUrl}users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: link\r\n      })\r\n    })\r\n  }\r\n\r\n  getAppData() {\r\n    return Promise.all([this.getUserInfo(), this.getCards()])\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-18/',\r\n  headers: {\r\n    authorization: '3f1525c8-6553-40b2-a3fa-d91718e64979',\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\nexport default api;","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction AddPlacePopup({\r\n                         isOpen,\r\n                         onClose,\r\n                         stopClose,\r\n                         onAddPlace\r\n                       }) {\r\n  const name = React.useRef('');\r\n  const link = React.useRef('');\r\n  const [nameInputValid, setNameInputValid] = React.useState(false);\r\n  const [linkInputValid, setLinkInputValid] = React.useState(false);\r\n  const [nameErrorMessage, setNameErrorMessage] = React.useState('');\r\n  const [linkErrorMessage, setLinkErrorMessage] = React.useState('');\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onAddPlace({\r\n      link: link.current.value,\r\n      name: name.current.value\r\n    });\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    !isOpen && link.current.parentElement.reset();\r\n    setLinkInputValid(false);\r\n    setNameInputValid(false);\r\n    setNameErrorMessage('');\r\n    setLinkErrorMessage('');\r\n  }, [isOpen])\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      stopClose={stopClose}\r\n      onSubmit={handleSubmit}\r\n      name={'add-img'}\r\n      title={'Новое место'}\r\n      isValid={nameInputValid && linkInputValid}\r\n    >\r\n      <>\r\n        <input name=\"name\" id=\"add-title\" className=\"popup__input popup__input_type_title\" placeholder=\"Название\"\r\n               required minLength=\"2\" maxLength=\"30\" ref={name}\r\n               onInput={() => {\r\n                 setNameInputValid(name.current.validity.valid);\r\n                 setNameErrorMessage(name.current.validationMessage);\r\n               }}\r\n        />\r\n        <span id=\"add-title-error\" className=\"popup__error\">{nameErrorMessage}</span>\r\n        <input name=\"link\" id=\"add-url\" type=\"url\" className=\"popup__input popup__input_type_src\"\r\n               placeholder=\"Ссылка на картинку\" required ref={link}\r\n               onInput={() => {\r\n                 setLinkInputValid(link.current.validity.valid);\r\n                 setLinkErrorMessage(link.current.validationMessage);\r\n               }}\r\n        />\r\n        <span id=\"add-url-error\" className=\"popup__error\">{linkErrorMessage}</span>\r\n      </>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction SubmitDeletePopup({isOpen, onClose, stopClose, onDelete}) {\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onDelete();\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      stopClose={stopClose}\r\n      onSubmit={handleSubmit}\r\n      name={'confirm-form'}\r\n      title={'Вы уверены?'}\r\n      isValid={true}\r\n    >\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default SubmitDeletePopup;","import React from 'react';\r\nimport {Route, Redirect} from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({component: Component, ...props}) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\"/>\r\n      }\r\n    </Route>\r\n  )\r\n}\r\n\r\nexport default ProtectedRoute;","import React from \"react\";\r\n\r\nfunction PageNotFound() {\r\n  return (\r\n    <img src='http://artismedia.by/blog/wp-content/uploads/2018/05/in-blog2-1.png' alt='404'/>\r\n  )\r\n}\r\n\r\nexport default PageNotFound;","export const BASE_URL = 'https://auth.nomoreparties.co/';\r\n\r\nexport const register = (password, email) => {\r\n  return fetch(`${BASE_URL}signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify({password, email})\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .then((res) => {\r\n      return res;\r\n    })\r\n    .catch((err) => {\r\n      console.log(err)\r\n    })\r\n}\r\n\r\nexport const authorize = (password, email) => {\r\n  return fetch(`${BASE_URL}signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify({password, email})\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .then((data) => {\r\n      if (data.token) {\r\n        localStorage.setItem('token', data.token);\r\n        return data;\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.log(err)\r\n    })\r\n}\r\n\r\nexport const checkToken = (token) => {\r\n  return fetch(`${BASE_URL}users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Authorization\": `Bearer ${token}`\r\n    }\r\n  })\r\n    .then(res => res.json())\r\n    .then((data) => data)\r\n}","import React from 'react';\r\n\r\nfunction InfoToolTip({\r\n                       isOpen,\r\n                       success,\r\n                       onClose,\r\n                       stopClose\r\n                     }) {\r\n  return (\r\n    <section className={`popup ${isOpen ? ' popup_visible' : ''}`} onMouseDown={onClose}>\r\n      <div className=\"popup__info\" onClick={stopClose}>\r\n        <button type=\"button\" className=\"popup__close-btn\" onMouseDown={onClose}></button>\r\n        <div\r\n          className={`popup__confirm-img ${success ? 'popup__confirm-img_type_success' : 'popup__confirm-img_type_fail'}`}>\r\n        </div>\r\n        <p\r\n          className='popup__text'>{success ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}\r\n        </p>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default InfoToolTip;","import React from 'react';\r\nimport {Route, Switch, useHistory} from 'react-router-dom';\r\nimport Header from \"./Header\";\r\nimport Main from \"./Main\";\r\nimport Login from \"./Login\";\r\nimport Register from \"./Register\";\r\nimport Footer from \"./Footer\";\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport ImagePopup from \"./ImagePopup\";\r\nimport api from \"../utils/api\";\r\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\r\nimport AddPlacePopup from \"./AddPlacePopup\";\r\nimport SubmitDeletePopup from \"./SubmitDeletePopup\";\r\nimport {LoadingContext} from \"../contexts/LoadingContext\";\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\nimport PageNotFound from \"./PageNotFound\";\r\nimport * as auth from '../utils/auth';\r\nimport InfoToolTip from \"./InfoToolTip\";\r\n\r\nfunction App() {\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n  const [isDeletePopupOpen, setIsDeletePopupOpen] = React.useState(false);\r\n  const [isInfoPopupOpen, setIsInfoPopupOpen] = React.useState(false);\r\n  const [selectedCard, setSelectedCard] = React.useState({name: '', link: ''});\r\n  const [currentUser, setCurrentUser] = React.useState({});\r\n  const [cards, setCards] = React.useState([]);\r\n  const [cardToDelete, setCardToDelete] = React.useState(null);\r\n  const [loadingText, setLoadingText] = React.useState('');\r\n  const [loggedIn, setLoggedIn] = React.useState(false);\r\n  const [success, setSuccess] = React.useState(false);\r\n  const [email, setEmail] = React.useState('');\r\n  const history = useHistory();\r\n\r\n  React.useEffect(() => {\r\n    handleTokenCheck();\r\n  }, [])\r\n\r\n  React.useEffect(() => {\r\n    if (loggedIn) {\r\n      history.push('/');\r\n    }\r\n  }, [loggedIn]);\r\n\r\n  React.useEffect(() => {\r\n    api.getAppData()\r\n      .then(([userProfile, cardList]) => {\r\n        setCurrentUser(userProfile);\r\n        setCards(cardList);\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n  }, [])\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n    setLoadingText('Сохранить');\r\n    document.addEventListener('keydown', handleEscButton);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n    setLoadingText('Сохранить');\r\n    document.addEventListener('keydown', handleEscButton);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n    setLoadingText('Создать');\r\n    document.addEventListener('keydown', handleEscButton);\r\n  }\r\n\r\n  function handleDeleteCardClick(card) {\r\n    setIsDeletePopupOpen(true);\r\n    setLoadingText('Да')\r\n    setCardToDelete(card);\r\n    document.addEventListener('keydown', handleEscButton);\r\n  }\r\n\r\n  function handleEscButton(e) {\r\n    if (e.key === 'Escape') {\r\n      closeAllPopups();\r\n    }\r\n  }\r\n\r\n  function stopEvent(e) {\r\n    e.stopPropagation();\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    document.removeEventListener('keydown', handleEscButton);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsDeletePopupOpen(false);\r\n    setIsInfoPopupOpen(false);\r\n    setSelectedCard({name: '', link: ''});\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n    document.addEventListener('keydown', handleEscButton);\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n\r\n    api.changeLikeStatus(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n        setCards(newCards);\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n\r\n  function handleCardDelete() {\r\n    setLoadingText('Удаление');\r\n    api.deleteCard(cardToDelete)\r\n      .then(() => {\r\n        const newCards = cards.filter(c => c._id !== cardToDelete);\r\n        setCards(newCards);\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n\r\n  function handleUpdateUser(userInfo) {\r\n    setLoadingText('Сохранение');\r\n    api.setUserInfo(userInfo)\r\n      .then((userInfo) => {\r\n        setCurrentUser(userInfo);\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n\r\n  function handleUpdateAvatar(user) {\r\n    setLoadingText('Сохранение');\r\n    api.setAvatar(user.avatar)\r\n      .then((user) => {\r\n        setCurrentUser(user);\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n\r\n  function handleAddPlaceSubmit(newCard) {\r\n    setLoadingText('Сохранение');\r\n    api.addNewCard(newCard)\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n\r\n  function handleSignOut() {\r\n    localStorage.removeItem('token');\r\n    setEmail('');\r\n    setLoggedIn(false);\r\n  }\r\n\r\n  function handleSignIn(password, email) {\r\n    auth.authorize(password, email)\r\n      .then((data) => {\r\n        if (data.token) {\r\n          setLoggedIn(true);\r\n          localStorage.setItem('token', data.token);\r\n          setEmail(email);\r\n          history.push('/');\r\n        }\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  function handleRegister(password, email) {\r\n    auth.register(password, email)\r\n      .then((res) => {\r\n        if (res.data['_id']) {\r\n          setSuccess(true);\r\n          setIsInfoPopupOpen(true);\r\n          history.push('/sign-in');\r\n        }\r\n        if (res.status === 400 || res.status === 404) {\r\n          setSuccess(false);\r\n          setIsInfoPopupOpen(true);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err)\r\n        setSuccess(false);\r\n        setIsInfoPopupOpen(true);\r\n      })\r\n  }\r\n\r\n  function handleTokenCheck() {\r\n    if (localStorage.getItem('token')) {\r\n      const token = localStorage.getItem('token');\r\n      auth.checkToken(token)\r\n        .then(res => {\r\n          if (res) {\r\n            setEmail(res.data.email);\r\n            setLoggedIn(true);\r\n          }\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <Header\r\n        handleSignOut={handleSignOut}\r\n        loggedIn={loggedIn}\r\n        email={email}\r\n      />\r\n      <Switch>\r\n        <ProtectedRoute\r\n          exact path='/'\r\n          cards={cards}\r\n          onCardLike={handleCardLike}\r\n          onCardDelete={handleDeleteCardClick}\r\n          onEditAvatar={handleEditAvatarClick}\r\n          onEditProfile={handleEditProfileClick}\r\n          onAddPlace={handleAddPlaceClick}\r\n          onCardClick={handleCardClick}\r\n          component={Main}\r\n          loggedIn={loggedIn}\r\n        />\r\n        <Route path='/sign-up'>\r\n          <Register\r\n            onRegister={handleRegister}\r\n          />\r\n        </Route>\r\n        <Route path='/sign-in'>\r\n          <Login signIn={handleSignIn}/>\r\n        </Route>\r\n        <Route path='*'>\r\n          <PageNotFound/>\r\n        </Route>\r\n      </Switch>\r\n\r\n      {loggedIn && <Footer/>}\r\n\r\n      <LoadingContext.Provider value={loadingText}>\r\n        <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopups}\r\n          stopClose={stopEvent}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n        />\r\n\r\n        <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={closeAllPopups}\r\n          stopClose={stopEvent}\r\n          onUpdateUser={handleUpdateUser}\r\n        />\r\n\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n          stopClose={stopEvent}\r\n          onAddPlace={handleAddPlaceSubmit}\r\n        />\r\n\r\n        <ImagePopup\r\n          card={selectedCard}\r\n          onClose={closeAllPopups}\r\n          stopClose={stopEvent}\r\n        />\r\n\r\n        <SubmitDeletePopup\r\n          isOpen={isDeletePopupOpen}\r\n          onClose={closeAllPopups}\r\n          stopClose={stopEvent}\r\n          onDelete={handleCardDelete}\r\n        />\r\n      </LoadingContext.Provider>\r\n\r\n      <InfoToolTip\r\n        isOpen={isInfoPopupOpen}\r\n        success={success}\r\n        onClose={closeAllPopups}\r\n        stopClose={stopEvent}\r\n      />\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({getCLS, getFID, getFCP, getLCP, getTTFB}) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {BrowserRouter} from \"react-router-dom\";\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App/>\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}